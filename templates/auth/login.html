{% extends "base.html" %}

{% block title %}Log In - Spotify Playlist Generator{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="auth-form-container">
        <div class="text-center mb-4">
          <i class="bi bi-spotify text-success display-1"></i>
          <h2 class="mt-3">Welcome Back</h2>
          <p class="text-muted">Sign in to your account to continue</p>
        </div>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
        
        <div class="card shadow-sm">
          <div class="card-body p-4">
            <form method="POST" action="{{ url_for('auth.login') }}">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
              
              <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <div class="input-group">
                  <span class="input-group-text bg-light">
                    <i class="bi bi-envelope"></i>
                  </span>
                  <input type="email" class="form-control" id="email" name="email" required 
                         placeholder="Your email address">
                </div>
              </div>
              
              <div class="mb-3">
                <div class="d-flex justify-content-between align-items-center">
                  <label for="password" class="form-label">Password</label>
                  <a href="{{ url_for('auth.reset_password_request') }}" class="text-decoration-none small">
                    Forgot password?
                  </a>
                </div>
                <div class="input-group">
                  <span class="input-group-text bg-light">
                    <i class="bi bi-lock"></i>
                  </span>
                  <input type="password" class="form-control" id="password" name="password" required 
                         placeholder="Your password">
                </div>
              </div>
              
              <div class="mb-4 form-check">
                <input type="checkbox" class="form-check-input" id="remember" name="remember">
                <label class="form-check-label" for="remember">Remember me</label>
              </div>
              
              <div class="d-grid">
                <button type="submit" class="btn btn-success btn-lg">
                  <i class="bi bi-box-arrow-in-right me-2"></i> Log In
                </button>
              </div>
            </form>
          </div>
        </div>
        
        <div class="mt-4 text-center">
          <p class="mb-0">Don't have an account? <a href="{{ url_for('auth.register') }}" class="text-success">Sign up</a></p>
        </div>
        
        <div class="text-center mt-4">
          <a href="{{ url_for('index') }}" class="btn btn-sm btn-outline-secondary">
            <i class="bi bi-arrow-left me-1"></i> Back to Home
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .auth-form-container {
    max-width: 450px;
    margin: 0 auto;
  }
  
  .card {
    border-radius: 10px;
    border: none;
  }
  
  .input-group-text {
    border: none;
  }
  
  .form-control {
    border-left: none;
  }
  
  .form-control:focus {
    box-shadow: none;
    border-color: #ced4da;
  }
  
  .btn-success {
    background-color: #1DB954;
    border-color: #1DB954;
  }
  
  .btn-success:hover {
    background-color: #1AA34A;
    border-color: #1AA34A;
  }
  
  .text-success {
    color: #1DB954 !important;
  }
</style>
{% endblock %}

<!-- explainer: Enhanced the login page with a modern UI featuring Spotify branding colors, iconography, and improved form layout. Added input group styling with icons, better spacing, and responsive card design for better user experience. Also included clear navigation back to the home page. -->